{"version":3,"sources":["webpack:///webpack/bootstrap 9d63b974eef23bb9811d","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./src/GulpSassPedigree.js","webpack:///./src/DependenciesGraph.js","webpack:///./src/Helpers.js","webpack:///./src/stripScssImports.js","webpack:///external \"gulp-util\"","webpack:///external \"through2\""],"names":["createPedigree","getAncestors","graph","sassPedigreeStudy","file","enc","cb","isNull","onFileChange","contents","toString","base","sassPedigreeGetAncestors","parents","get","path","length","ancestors","ascend","slice","forEach","push","File","cwd","p","dirname","type","createReadStream","readFileSync","obj","DependenciesGraph","Object","assign","create","children","oldDeps","newDeps","concat","cache","list","res","shift","dep","content","dir","imports","updateKeys","createStack","updateChildren","updateParents","k","prototype","hasOwnProperty","call","indexOf","files","map","a","resolve","filename","existsSync","b","replace","keys","prune","arr","filter","child","i","lastIndexOf","stripScssImports","textContent","match","reduce","trim","split"],"mappings":"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","file":"GulpSassPedigree.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9d63b974eef23bb9811d","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 1\n// module chunks = 0","import through from 'through2';\r\nimport path from 'path';\r\nimport fs from 'fs';\r\nimport gutil from 'gulp-util';\r\n\r\nimport {DependenciesGraph} from './DependenciesGraph';\r\n\r\nconst graph = new DependenciesGraph();\r\n\r\nfunction sassPedigreeStudy(file, enc, cb) {\r\n  if(file && !file.isNull()) {\r\n    void graph.onFileChange(\r\n      file,\r\n      file.contents.toString(),\r\n      file.base\r\n    );\r\n  }\r\n\r\n  return cb(null, file);\r\n}\r\n\r\n\r\nfunction sassPedigreeGetAncestors(file, enc, cb) {\r\n  if(!file || file.isNull()) {\r\n    return cb(null, file);\r\n  }\r\n\r\n  void graph.onFileChange(\r\n    file,\r\n    file.contents.toString(),\r\n    file.base\r\n  );\r\n\r\n  let parents = graph.get(file.path).parents;\r\n\r\n  if(parents.length) {\r\n    let ancestors = graph.ascend(parents.slice());\r\n\r\n    ancestors\r\n      .forEach(p => {\r\n        this.push(\r\n          new gutil.File(\r\n            {\r\n              cwd: file.cwd,\r\n              path: p,\r\n              base: path.dirname(p),\r\n              contents: file.type === 'stream' ?\r\n                fs.createReadStream(p) : fs.readFileSync(p)\r\n            }\r\n          )\r\n        )\r\n      })\r\n    ;\r\n  }\r\n\r\n  return cb(null, file);\r\n}\r\n\r\nexport function createPedigree() {\r\n  return through.obj(sassPedigreeStudy);\r\n}\r\nexport function getAncestors() {\r\n  return through.obj(sassPedigreeGetAncestors);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/GulpSassPedigree.js","import path from 'path';\r\nimport fs from 'fs';\r\nimport {prune} from './Helpers';\r\nimport {stripScssImports} from './stripScssImports';\r\n\r\nexport class DependenciesGraph {\r\n  static createStack() {\r\n\r\n    return Object.assign(Object.create(null), {children: [], parents: []});\r\n  }\r\n\r\n  static updateChildren(oldDeps, newDeps) {\r\n\r\n    return prune([].concat(newDeps));\r\n  }\r\n\r\n  constructor() {\r\n    this.cache = Object.create(null);\r\n  }\r\n\r\n  get length() {\r\n\r\n    return Object.keys(this.cache).length;\r\n  }\r\n\r\n  get(path) {\r\n\r\n    return this.cache[path];\r\n  }\r\n\r\n  ascend(list, res = []) {\r\n    if(!list.length) {\r\n      return prune(res);\r\n    }\r\n\r\n    let p = list.shift();\r\n    let dep = this.cache[p];\r\n\r\n    return dep.parents.length ?\r\n      this.ascend(list.concat(dep.parents), res) :\r\n      this.ascend(list, res.concat(p))\r\n      ;\r\n  }\r\n\r\n  onFileChange(file, content, dir) {\r\n    let imports = this.updateKeys(stripScssImports(content), dir);\r\n\r\n    if(!this.cache[file.path]) {\r\n      this.cache[file.path] = DependenciesGraph.createStack();\r\n    }\r\n\r\n    this.cache[file.path].children = DependenciesGraph.updateChildren(\r\n      this.cache[file.path].children, imports\r\n    );\r\n\r\n    void this.updateParents();\r\n  }\r\n\r\n  updateParents() {\r\n    for(let k in this.cache) {\r\n      if(Object.prototype.hasOwnProperty.call(this.cache, k)) {\r\n        this.cache[k].parents = [];\r\n      }\r\n    }\r\n\r\n    for(let k in this.cache) {\r\n      if(!Object.prototype.hasOwnProperty.call(this.cache, k)) {\r\n        continue;\r\n      }\r\n\r\n      this.cache[k]\r\n        .children\r\n        .forEach(file => {\r\n\r\n          if(!~this.cache[file].parents.indexOf(k)) {\r\n            this.cache[file].parents.push(k)\r\n          }\r\n        })\r\n      ;\r\n    }\r\n  }\r\n\r\n  updateKeys(files, dir) {\r\n\r\n    return files\r\n      .map(filename => {\r\n        let a = path.resolve(dir, filename);\r\n\r\n        if(a in this.cache) {\r\n\r\n          return a;\r\n        }\r\n\r\n        if(fs.existsSync(a)) {\r\n          this.cache[a] = DependenciesGraph.createStack();\r\n\r\n          return a;\r\n        }\r\n\r\n        let b = a.replace(/(\\w+\\.scss$)/, '_$1');\r\n        if(b in this.cache) {\r\n\r\n          return b;\r\n        }\r\n\r\n        if(fs.existsSync(b)) {\r\n          this.cache[b] = DependenciesGraph.createStack();\r\n\r\n          return b;\r\n        }\r\n\r\n      }, [])\r\n      ;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/DependenciesGraph.js","export function prune(arr) {\r\n  return arr.filter((child, i, list) => child && i === list.lastIndexOf(child));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers.js","export function stripScssImports(textContent) {\r\n\r\n  return (\r\n    // TODO: Handle comments //@import \"\"; or /* @import \"\"; */\r\n    textContent.match(/(?:@import\\s+)([^;]*)/g) || []\r\n  )\r\n    .reduce((res, filename) => res.concat(\r\n      filename\r\n        .replace(/@import/, '')\r\n        .replace(/[\"']/g, '')\r\n        .trim()\r\n        .split(/,\\s*/)\r\n        .map(p => `${p.replace(/\\.scss$/, '')}.scss`)\r\n      )\r\n      , [])\r\n    ;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/stripScssImports.js","module.exports = require(\"gulp-util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gulp-util\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"through2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"through2\"\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}